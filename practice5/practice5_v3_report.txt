# Rapport RI - TP5 - v3

## Avancement :

- conception et modification de classes pour les runs XML
- fichiers de tests sur une collection XML créée
- fonction SMART_lnu
- script de validation du format des fichiers de runs
- run de "test" sur une sous partie de la collection (2K) 
  pour plus de rapidité et prendre moins de RAM
- Puis run sur la collection entière avec les fonctions de poids 
  (ltn, ltc, lnu varie slope, BM25 varie k1 ou b) avec ou sans 
  stopwords/Porter stemmer.
- Pour automatiser les run utilisation d'un script python au lieu d'un script bash
  pour éviter de recharger les index à chaque run.


## Quelques chiffres :

- exploration de 3,457,522 xpath dans la collection pour le ranking
- temps moyen du preprocessing : 7min
- temps moyen de l'indexing : 4min (2 min si on utilise une stop-liste)
- taille moyenne des index sauvegardé (avec qq stats) : 3,3Go
- temps de ranking de 30s à 1m celon la taille et les termes de la requête
  (cela est du au calcul dynamique de certainne valeurs 
  qui requiert de parcourir l'arbre xml, le choix à été fait de ne pas stocker ces valeurs
  pour ne pas surcharger la RAM)
- chargement d'un index sauvegarder ~10min (dû à la taille du fichier et au module python 
  (pickle) utilisé, on envisage des alternatives comme hickle ou cPickle)


## Exemple de statistiques pour une de nos collections :


index_nltk_nostop_lem_porter_XML_Only_Ascii_Coll_NoSem.pkl
 --------------------------------------------------

        Collection: ../../data/Practice_05_data/XML-Coll-withSem/

        Number of documents: 9805

        Average Document Length: 27.96430392656808 (words)

        Average Term Length: 5.754018202601445 (characters)

        Vocabulary Size: 157870 (unique terms)

        Total Collection Frequency: 2688255 (terms)

        Loading time: 00h02m00s120252ms616100ns (total: 120252616100ns) seconds

        Preprocessing time: 00h06m26s386328ms967800ns (total: 386328967800ns) seconds

        Indexation time: 00h01m58s118548ms39900ns (total: 118548039900ns) seconds

        Total time: 00h06m26s386328ms967800ns (total: 386328967800ns)00h01m58s118548ms39900ns (total: 118548039900ns) seconds

        Computing statistics time: 00h00m02s2352ms751000ns (total: 2352751000ns) seconds

        --------------------------------------------------


## QQ commentaires sur les résultats des runs :

Après comparaison sur 2-3 runs avec les résultats du TP4 on retrouve dans le top 10
des éléments qui viennent de document classés dans le top 10 du TP4.
Les scores que l'on obtient avec nos fonctions de poids restent cohérents par
rapport à ceux du TP4.